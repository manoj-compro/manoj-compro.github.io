{"version":3,"sources":["../src/components/CounterPlayer.ts","../src/player.ts","../src/index.ts"],"sourcesContent":["import { css, html, LitElement } from 'lit';\r\nimport type { PropertyValues } from 'lit';\r\nimport { property, state } from 'lit/decorators.js';\r\n\r\nimport { CounterPlayer } from '../player.js';\r\n\r\nexport const COUNTER_PLAYER_TAG = 'counter-player';\r\n\r\nexport class CounterPlayerElement extends LitElement {\r\n  @property({ type: String, attribute: 'player-id' })\r\n  playerId = 'demo';\r\n\r\n  @property({ type: String })\r\n  label = 'Demo Player';\r\n\r\n  @property({ type: Number, attribute: 'max-count' })\r\n  maxCount = 5;\r\n\r\n  @state()\r\n  private playerState = new CounterPlayer({\r\n    id: this.playerId,\r\n    label: this.label,\r\n    maxCount: this.maxCount\r\n  }).getState();\r\n\r\n  private player = new CounterPlayer({\r\n    id: this.playerId,\r\n    label: this.label,\r\n    maxCount: this.maxCount\r\n  });\r\n\r\n  protected willUpdate(changed: PropertyValues<this>): void {\r\n    if (\r\n      changed.has('playerId') ||\r\n      changed.has('label') ||\r\n      changed.has('maxCount')\r\n    ) {\r\n      this.player = new CounterPlayer({\r\n        id: this.playerId,\r\n        label: this.label,\r\n        maxCount: this.maxCount\r\n      });\r\n      this.syncState();\r\n    }\r\n  }\r\n\r\n  private syncState(): void {\r\n    this.playerState = this.player.getState();\r\n  }\r\n\r\n  private onIncrement(): void {\r\n    this.player.increment();\r\n    this.syncState();\r\n  }\r\n\r\n  private onDecrement(): void {\r\n    this.player.decrement();\r\n    this.syncState();\r\n  }\r\n\r\n  private onReset(): void {\r\n    this.player.reset();\r\n    this.syncState();\r\n  }\r\n\r\n  render() {\r\n    const statusText = this.playerState.atMax\r\n      ? 'Reached the max.'\r\n      : 'Ready to play.';\r\n\r\n    return html`\r\n      <section class=\"test-player-widget\">\r\n        <header class=\"test-player-widget__header\">\r\n          <h2 class=\"test-player-widget__title\">${this.playerState.label}</h2>\r\n          <p class=\"test-player-widget__meta\">ID: ${this.playerState.id}</p>\r\n        </header>\r\n\r\n        <div class=\"test-player-widget__stats\">\r\n          <span class=\"test-player-widget__count\"\r\n            >Count: ${this.playerState.count}</span\r\n          >\r\n          <span class=\"test-player-widget__limit\"\r\n            >Max: ${this.playerState.maxCount}</span\r\n          >\r\n        </div>\r\n\r\n        <p\r\n          class=\"test-player-widget__status\"\r\n          data-at-max=${String(this.playerState.atMax)}\r\n        >\r\n          ${statusText}\r\n        </p>\r\n\r\n        <div class=\"test-player-widget__actions\">\r\n          <button type=\"button\" @click=${this.onDecrement}>-</button>\r\n          <button type=\"button\" @click=${this.onIncrement}>+</button>\r\n          <button type=\"button\" @click=${this.onReset}>Reset</button>\r\n        </div>\r\n      </section>\r\n    `;\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n    }\r\n\r\n    .test-player-widget {\r\n      border: 1px solid #d0d7de;\r\n      border-radius: 12px;\r\n      padding: 16px;\r\n      display: grid;\r\n      gap: 12px;\r\n      max-width: 320px;\r\n      font-family:\r\n        ui-sans-serif,\r\n        system-ui,\r\n        -apple-system,\r\n        'Segoe UI',\r\n        sans-serif;\r\n    }\r\n\r\n    .test-player-widget__header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: baseline;\r\n      gap: 12px;\r\n    }\r\n\r\n    .test-player-widget__title {\r\n      font-size: 18px;\r\n      font-weight: 600;\r\n      margin: 0;\r\n    }\r\n\r\n    .test-player-widget__meta {\r\n      font-size: 12px;\r\n      color: #57606a;\r\n      margin: 0;\r\n    }\r\n\r\n    .test-player-widget__stats {\r\n      display: flex;\r\n      gap: 12px;\r\n      font-size: 14px;\r\n    }\r\n\r\n    .test-player-widget__status {\r\n      font-size: 14px;\r\n      margin: 0;\r\n    }\r\n\r\n    .test-player-widget__status[data-at-max='true'] {\r\n      color: #b42318;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .test-player-widget__actions {\r\n      display: flex;\r\n      gap: 8px;\r\n    }\r\n\r\n    .test-player-widget__actions button {\r\n      border: 1px solid #cfd7de;\r\n      background: #ffffff;\r\n      border-radius: 6px;\r\n      padding: 6px 10px;\r\n      cursor: pointer;\r\n    }\r\n  `;\r\n}\r\n\r\nexport const defineCounterPlayer = (): void => {\r\n  if (!customElements.get(COUNTER_PLAYER_TAG)) {\r\n    customElements.define(COUNTER_PLAYER_TAG, CounterPlayerElement);\r\n  }\r\n};\r\n","export interface CounterPlayerProps {\r\n  id: string;\r\n  label?: string;\r\n  maxCount?: number;\r\n}\r\n\r\nexport interface CounterPlayerState {\r\n  id: string;\r\n  label: string;\r\n  count: number;\r\n  maxCount: number;\r\n  atMax: boolean;\r\n}\r\n\r\nexport class CounterPlayer {\r\n  private count: number;\r\n  private readonly id: string;\r\n  private label: string;\r\n  private readonly maxCount: number;\r\n\r\n  constructor(props: CounterPlayerProps) {\r\n    this.id = props.id;\r\n    this.label = props.label ?? 'Player';\r\n    this.maxCount = props.maxCount ?? 10;\r\n    this.count = 0;\r\n  }\r\n\r\n  getState(): CounterPlayerState {\r\n    return {\r\n      id: this.id,\r\n      label: this.label,\r\n      count: this.count,\r\n      maxCount: this.maxCount,\r\n      atMax: this.count >= this.maxCount\r\n    };\r\n  }\r\n\r\n  increment(step = 1): CounterPlayerState {\r\n    this.count = this.clamp(this.count + Math.max(1, step));\r\n    return this.getState();\r\n  }\r\n\r\n  decrement(step = 1): CounterPlayerState {\r\n    this.count = this.clamp(this.count - Math.max(1, step));\r\n    return this.getState();\r\n  }\r\n\r\n  reset(): CounterPlayerState {\r\n    this.count = 0;\r\n    return this.getState();\r\n  }\r\n\r\n  rename(label: string): CounterPlayerState {\r\n    this.label = label.trim() || this.label;\r\n    return this.getState();\r\n  }\r\n\r\n  private clamp(value: number): number {\r\n    return Math.min(Math.max(0, value), this.maxCount);\r\n  }\r\n}\r\n","export {\r\n  COUNTER_PLAYER_TAG,\r\n  CounterPlayerElement,\r\n  defineCounterPlayer\r\n} from './components/CounterPlayer.js';\r\n\r\nimport { defineCounterPlayer } from './components/CounterPlayer.js';\r\n\r\ndefineCounterPlayer();\r\n"],"mappings":"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","names":[]}